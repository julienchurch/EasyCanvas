function EC(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.tempCanvas=void 0,this.imageData=void 0}EC.prototype.createCanvas=function(t,a,i,e,h){var s,n,o;void 0!==i&&(s=i.data?i.data:i),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=t,n.height=a,o.putImageData(i,e,h),this.canvas=n,this.ctx=o},EC.prototype.setCanvas=function(t){this.canvas=t,this.ctx=t.getContext("2d")},EC.prototype.resize=function(t,a){this.canvas.width=t,this.canvas.heght=a},EC.prototype.resizeTo=function(t){this.canvas.width=t.offsetWidth,this.canvas.height=t.offsetHeight},EC.prototype.styleAsBackground=function(t,a){this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.resizeTo(t),t.insertBefore(this.canvas,t.firstChild),void 0!==a&&this.drawCover(a)},EC.prototype.createCanvasAndResizeTo=function(t,a,i){var e=this.canvas.parentNode,h={width:e.offsetWidth,height:e.offsetHeight};createCanvas(h.width,h.height,t,a,i)},EC.prototype.putImageData=function(t,a,i){this.ctx.putImageData(t,a,i),this.imageData=t},EC.prototype.cacheImageData=function(){this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},EC.prototype.drawImage=function(t,a,i){this.ctx.drawImage(t,a,i),this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},EC.prototype.draw=function(t){this.ctx.drawImage(t,0,0),this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},EC.prototype.getDimensions=function(t){return"IMG"===t.nodeName?{width:t.naturalWidth,height:t.naturalHeight}:"CANVAS"===t.nodeName?{width:t.width,height:t.height}:void 0},EC.prototype.getAspectRatio=function(t){return dims=getDimensions(t),dims.width/dims.height},EC.prototype.drawCoverP=function(t,a){var i,e=t.getContext("2d"),h=getDimensions(t),s=(getDimensions(a),getAspectRatio(t)),n=getAspectRatio(a);if(n>s){var o=imgDims.width*(h.height/imgDims.height),i=(h.width-o)/2;e.drawImage(img,i,0,o,h.height)}else if(s>n){var r=imgDims.height*(h.width/imgDims.width),i=(h.height-r)/2;e.drawImage(img,0,i,h.width,r)}else e.drawImage(img,0,0,h.width,h.height)},EC.prototype.drawCover=function(t){drawCoverP(this.canvas,img),this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},EC.prototype.createRoundedRect=function(t,a,i,e,h,s){var n={x:a+s,y:i+s},o={x:a+e-s,y:i+s},r={x:a+e-s,y:i+h-s},c={x:a+s,y:i+h-s};t.save(),t.beginPath(),t.moveTo(n.x,i),t.lineTo(o.x,i),t.arc(o.x,o.y,s,1.5*Math.PI,0),t.lineTo(a+e,r.y),t.arc(r.x,r.y,s,0,.5*Math.PI),t.lineTo(c.x,i+h),t.arc(c.x,c.y,s,.5*Math.PI,Math.PI),t.lineTo(a,o.y),t.arc(n.x,n.y,s,Math.PI,1.5*Math.PI),t.closePath()},EC.prototype.saturateP=function(t,a,i,e){var h;h=t.data||t;var s,n,o,r,c=.3*(1-a),g=.6*(1-a),d=.1*(1-a);s=void 0===i&&void 0===e?h.length/4:i*e;for(var v=0;s>v;v++){var p=v<<2;n=h[p],o=h[p+1],r=h[p+2],h[p]=(c+a)*n+g*o+d*r,h[p+1]=c*n+(g+a)*o+d*r,h[p+2]=c*n+g*o+(d+a)*r}return t},EC.prototype.saturate=function(t,a,i){var e=this.saturateP(this.imageData,t,a,i);this.ctx.putImageData(e,0,0)},EC.prototype.contrastP=function(t,a){for(var i=t.data,e=259*(a+255)/(255*(259-a)),h=0;h<i.length;h+=4)i[h]=e*(i[h]-128)+128,i[h+1]=e*(i[h+1]-128)+128,i[h+2]=e*(i[h+2]-128)+128;return t},EC.prototype.contrast=function(t){var a=this.contrastP(this.imageData,t);this.ctx.putImageData(a,0,0)},EC.prototype.blur=function(t,a){var i=this.canvas;if("stackblur"===t){var e=stackBlurCanvasRGB(i,0,0,i.width,i.height,a);this.ctx.putImageData(e.id,0,0),this.imageData=e.id}},EC.prototype.lightenP=function(t,a){for(var i=t.data,e=0;e<i.length;e+=4)i[e]+=a,i[e+1]+=a,i[e+2]+=a;return t},EC.prototype.lighten=function(t){var a=this.lightenP(this.imageData,t);this.ctx.putImageData(a,0,0)};